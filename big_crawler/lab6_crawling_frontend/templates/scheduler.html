{% extends "base.html" %}
{# set the active page for display in the navbar #}
{% block title %}Sherlock - Crawling Schedules{% endblock %}
{% block head %} {{ super() }} {% endblock%}
{% block sidebar %}
<h6 class="sidebar-heading pt-2">Controls</h6>
<div data-component="ScheduleModalToggler" data-target="#addSchedule"></div>
<div data-component="SubmitButton"></div>
<div data-component="RevertButton"></div>
</button>
{% endblock %}
{% block content %}
<h1>Scheduler</h1>
<div data-component="ScheduleTable"
     data-keys='{{ ["name", "crawler", "schedule", "next_run", "controls"]|tojson }}'
     data-jobs='{{ jobs|tojson }}'></div>
<div data-component="ScheduleModal"
     data-sources='{{ ([("###", "Crawlers")] + crawlers + [("###", "Searches")] + searches)|tojson }}'
     data-triggers='{{ triggers|tojson }}'
     data-id="addSchedule" data-title="New scheduled query"></div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="{{ url_for('static', filename='js/fake-select.js') }}"></script>
<script src="{{ url_for('static', filename='js/mithril-components.js') }}"></script>
<script src="{{ url_for('static', filename='js/scheduler.js') }}"></script>
{% endblock %}